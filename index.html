<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Ch√∫c m·ª´ng Gi√°ng Sinh Trang</title>

<style>
    body {
        margin: 0;
        height: 100vh;
        background: linear-gradient(to bottom, #0b1d3a, #1e3c72);
        overflow: hidden;
        font-family: 'Segoe UI', sans-serif;
        color: white;
    }

    .container {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        z-index: 2;
        width: 100%;
        padding: 0 12px;
        box-sizing: border-box;
    }

    /* Ch·ªØ g√µ t·ª´ng k√Ω t·ª± - lu√¥n 1 d√≤ng + con tr·ªè nh·∫•p nh√°y */
    #typing {
        font-size: clamp(1.5em, 5vw, 3em);
        margin: 0 0 18px 0;
        color: #ffdddd;
        white-space: nowrap;      /* lu√¥n 1 d√≤ng */
        display: inline-block;
        border-right: 3px solid #ffdddd;
        padding-right: 6px;
        animation: blink 0.8s infinite;
    }

    @keyframes blink {
        0% { border-color: transparent; }
        50% { border-color: #ffdddd; }
        100% { border-color: transparent; }
    }

    .heart {
        font-size: 3em;
        color: #ff4d6d;
        animation: heartbeat 1.2s infinite;
        margin-bottom: 22px;
        opacity: 0;              /* s·∫Ω hi·ªán sau khi g√µ xong */
        transition: opacity 0.6s ease;
    }

    .heart.show {
        opacity: 1;
    }

    button {
        padding: 12px 26px;
        font-size: 16px;
        border: none;
        border-radius: 30px;
        cursor: pointer;
        background: #ff4d6d;
        color: white;
    }

    button:hover {
        background: #ff6f8a;
    }

    @keyframes heartbeat {
        0% { transform: scale(1); }
        25% { transform: scale(1.2); }
        50% { transform: scale(1); }
        75% { transform: scale(1.2); }
        100% { transform: scale(1); }
    }

    canvas {
        position: fixed;
        top: 0;
        left: 0;
        pointer-events: none;
        z-index: 1;
    }
</style>
</head>

<body>

<!-- Nh·∫°c (ƒë·∫∑t file feliz_navidad.mp3 c√πng th∆∞ m·ª•c / c√πng repo) -->
<audio id="music" loop>
    <source src="feliz_navidad.mp3" type="audio/mpeg">
</audio>

<canvas id="snow"></canvas>

<div class="container">
    <h1 id="typing"></h1>
    <div id="heart" class="heart">‚ù§Ô∏è</div>
    <button onclick="playMusic()">‚ñ∂ B·∫≠t nh·∫°c</button>
</div>

<script>
    // ===== Nh·∫°c =====
    function playMusic() {
        document.getElementById("music").play();
    }

    // (Tu·ª≥ ch·ªçn) Click b·∫•t k·ª≥ l·∫ßn ƒë·∫ßu c≈©ng b·∫≠t nh·∫°c (ƒë·ª° b·ªã ch·∫∑n autoplay)
    const music = document.getElementById("music");
    document.body.addEventListener("click", () => {
        music.play().catch(() => {});
    }, { once: true });

    // ===== Typewriter =====
    const text = "üéÑ Ch√∫c m·ª´ng Gi√°ng Sinh C√¥ h√†ng x√≥m üéÑ";
    const typingElement = document.getElementById("typing");
    const heartEl = document.getElementById("heart");
    let idx = 0;

    function typeEffect() {
        if (idx < text.length) {
            typingElement.textContent += text.charAt(idx);
            idx++;
            setTimeout(typeEffect, 120); // t·ªëc ƒë·ªô g√µ (ms)
        } else {
            // g√µ xong: hi·ªán tim
            heartEl.classList.add("show");
            // t·∫Øt con tr·ªè (tu·ª≥ ch·ªçn). N·∫øu mu·ªën gi·ªØ, b·ªè d√≤ng d∆∞·ªõi.
            typingElement.style.borderRight = "none";
            typingElement.style.animation = "none";
        }
    }
    typeEffect();

    // ===== Tuy·∫øt r∆°i =====
    const canvas = document.getElementById("snow");
    const ctx = canvas.getContext("2d");

    let w = canvas.width = window.innerWidth;
    let h = canvas.height = window.innerHeight;
    let snowflakes = [];

    function createSnowflakes() {
        snowflakes = [];
        for (let i = 0; i < 200; i++) {
            snowflakes.push({
                x: Math.random() * w,
                y: Math.random() * h,
                r: Math.random() * 3 + 1,
                d: Math.random() + 1
            });
        }
    }

    function drawSnowflakes() {
        ctx.clearRect(0, 0, w, h);
        ctx.fillStyle = "white";
        ctx.beginPath();
        for (const f of snowflakes) {
            ctx.moveTo(f.x, f.y);
            ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2);
        }
        ctx.fill();
        moveSnowflakes();
    }

    let angle = 0;
    function moveSnowflakes() {
        angle += 0.01;
        for (const f of snowflakes) {
            f.y += Math.pow(f.d, 2) + 1;
            f.x += Math.sin(angle) * 1.5;

            if (f.y > h) {
                f.y = 0;
                f.x = Math.random() * w;
            }
        }
    }

    function animateSnow() {
        drawSnowflakes();
        requestAnimationFrame(animateSnow);
    }

    createSnowflakes();
    animateSnow();

    window.addEventListener("resize", () => {
        w = canvas.width = window.innerWidth;
        h = canvas.height = window.innerHeight;
        createSnowflakes();
    });
</script>

</body>
</html>
